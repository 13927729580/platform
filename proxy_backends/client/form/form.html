<template name="proxyBackendForm">
  {{# autoForm collection=proxyBackendsCollection id="insertProxyBackend" type="insert"}}
    <!-- hidden fields, auto-value -->
    {{> afQuickField name="proxyId" value=proxy._id type="hidden" }}
    {{> afQuickField name="apiId" value=api._id type="hidden" }}
    {{> afQuickField name="apiUmbrella.name" value=api.name type="hidden" }}
    {{> afQuickField name="apiUmbrella.frontend_host" value=proxy.apiUmbrella.url type="hidden" }}
    {{> afQuickField name="apiUmbrella.backend_host" value=api.url type="hidden" }}
    {{> afQuickField name="apiUmbrella.backend_protocol" value=apiUrlProtocol type="hidden" }}

    <!-- visible fields -->

    <!-- Proxy base path (frontend prefix) -->
    <div class="form-group">
      <label for="proxy-base-path-field">
        {{ afFieldLabelText name='apiUmbrella.url_matches.0.frontend_prefix'}}
      </label>
      <div class="input-group">
        <span class="input-group-addon" id="proxy-url">
          {{ proxy.apiUmbrella.url }}
        </span>
        {{> afFieldInput
          name="apiUmbrella.url_matches.0.frontend_prefix"
          class="form-control"
          aria-describedby="proxy-url"
          id="proxy-base-path-field"
        }}
      </div>
      {{#if afFieldIsInvalid name='proxy.apiUmbrella.url'}}
        <span class="help-block">
          {{{afFieldMessage name='proxy.apiUmbrella.url'}}}
        </span>
      {{/if}}
    </div>

    <!-- API path (backend prefix) -->
    {{> afQuickField name="apiUmbrella.url_matches.0.backend_prefix" }}

    <!-- API host (servers.host) -->
    {{> afQuickField name="apiUmbrella.servers.0.host" value=api.url readonly="true" }}

    <!-- API port (servers.port) -->
    {{> afQuickField name="apiUmbrella.servers.0.port" value=apiPortHelper }}
  {{/ autoForm }}
</template>
