<template name="organizationApis">
  {{# if userIsOrganizationManager }}
  <div class="panel panel-default">
    <div class="panel-heading">
      <h2 class="panel-title">
        <i class="fa fa-exchange" aria-hidden="true"></i>
        Connect API to Organization
      </h2>
    </div>
    <div class="panel-body">
    {{# unless api.organization }}
      {{# autoForm
        collection=organizationApisCollection
        id="organizationApisForm"
        type='method'
        meteormethod='connectOrganizationApi'
      }}
      <!-- organizationId is given, set value & hide -->
      {{# if organizationId }}
        {{> afQuickField name="organizationId" value=organizationId type="hidden" }}
      {{ else }}
        {{> afQuickField name="organizationId" label="Organizations" options=organizationOptions }}
      {{/ if }}
      <!-- apiId is given hide, $push to apiIds field -->
      {{# if api }}
        {{> afQuickField name="apiIds" value=api._id type="hidden" }}
      {{ else }}
        {{> afQuickField name="apiIds" options=apiOptions }}
      {{/ if }}
      <div id="organization-apis-buttons">
        <button type="submit" class="btn btn-success" id="organization-apis-connect">
          Connect
        </button>
      </div>
      {{/ autoForm }}
    {{ else }}
      <div id="organization-apis-buttons">
        {{ api.organization.name }}
        <button class="btn btn-danger" id="organization-apis-disconnect">
          Disconnect
        </button>
      </div>
    {{/ unless }}
    </div>
  </div>
  {{/ if }}
</template>
