<template name="proxy42ProxyForm">
  <!-- hidden fields, auto-value -->
  {{> afQuickField name="type" type="hidden" value="proxy42" }}

  {{> afQuickField name="apiUmbrella.name" value=api.name type="hidden" }}
  {{> afQuickField name="apiUmbrella.frontend_host" value=proxyHost type="hidden" }}
  {{> afQuickField name="apiUmbrella.backend_host" value=apiHost type="hidden" }}
  {{> afQuickField name="apiUmbrella.backend_protocol" value=apiUrlProtocol type="hidden" }}
  {{> afQuickField name="apiUmbrella.servers.0.host" value=apiHost type="hidden" }}
  {{> afQuickField name="apiUmbrella.balance_algorithm" value="least_conn" type="hidden" }}
  {{> afQuickField name="apiUmbrella.servers.0.port" value=apiPortHelper type="hidden" }}

  <div class="api-settings">
    <div class="form-group col-md-4" data-required="true" style="padding-left: 0 !important;">
      <!-- Proxy base path (frontend prefix) -->
      {{_ "proxyBackendForm_proxyBasePath_title" }}
      <label for="proxy-base-path-field" style="padding-left: 3px">
        {{ afFieldLabelText name='apiUmbrella.url_matches.0.frontend_prefix' }}
      </label>

      <div class="input-group">
        <span class="input-group-addon" id="proxy-url" >
          {{ proxy.proxy42.url }}
        </span>

        {{> afFieldInput
          name="apiUmbrella.url_matches.0.frontend_prefix"
          class="form-control"
          aria-describedby="proxy-url"
          id="proxy-base-path-field"
        }}
      </div>

      <!-- validation messages -->
      {{# if afFieldIsInvalid name='apiUmbrella.url_matches.0.frontend_prefix' }}
        <p class="text-danger">
          {{{ afFieldMessage name='apiUmbrella.url_matches.0.frontend_prefix' }}}
        </p>
      {{/ if }}

      <!-- help text -->
      <p class="help-block">
        {{_ "proxyBackendForm_proxyBasePath_helpText" }}&nbsp;<b>{{_ "general_example" }}</b><br />
        {{ proxy.apiUmbrella.url }}<b>{{_ "proxyBackendForm_proxyBasePath_helpText_example" }}</b>{{_ "proxyBackendForm_apiBasePath_helpText_continued" }}
      </p>
    </div>

    <!-- symbol for redirection -->
    <div class="col-md-2" style="text-align: center;">
      <!--  {{_ "proxyBackendForm_redirect_helpText" }} <br /> -->
      <br />
      <span style="font-weight: bold;">{{_ "proxyBackendForm_request_helpText" }}</span>
      <span class="glyphicon glyphicon-arrow-right"></span><br />
      <span class="glyphicon glyphicon-arrow-left"></span>
      <span style="font-weight: bold;">{{_ "proxyBackendForm_response_helpText" }}</span>
    </div>

    <!-- API base path (backend prefix) -->
    <div class="row">
      <div class="form-group col-md-4" data-required="true" style="margin-bottom: 0;">

        {{_ "proxyBackendForm_apiBasePath_title" }}
        <label for="api-base-path-field" style="padding-left: 3px">
          {{ afFieldLabelText name='apiUmbrella.url_matches.0.backend_prefix' }}
        </label>

        <div class="input-group">
          <!-- API url addon -->
          <span class="input-group-addon" id="api-url">
            {{ api.url }}
          </span>

          {{> afFieldInput
            name="apiUmbrella.url_matches.0.backend_prefix"
            class="form-control"
            aria-describedby="api-url"
            id="api-base-path-field"
          }}
        </div>

        <!-- validation messages -->
        {{# if afFieldIsInvalid name='apiUmbrella.url_matches.0.backend_prefix' }}
        <p class="text-danger">
          {{{ afFieldMessage name='apiUmbrella.url_matches.0.backend_prefix' }}}
        </p>
        {{/ if }}

        <!-- help text -->
        <p class="help-block">
          {{_ "proxyBackendForm_apiBasePath_helpText" }}&nbsp;<b>{{_ "general_example" }}</b><br />
          {{ api.url }}<b>{{_ "proxyBackendForm_apiBasePath_helpText_example" }}</b>{{_ "proxyBackendForm_apiBasePath_helpText_continued" }}
        </p>
      </div>

      <!-- API port (servers.port) -->
      <div class="form-group col-md-2" data-required="true">
        <label for="api-port-field" id="api-port-field-label">
          {{ afFieldLabelText name="apiUmbrella.servers.0.port" }}
        </label>

        {{> afFieldInput
          name="apiUmbrella.servers.0.port"
          value=apiPortHelper
          class="form-control"
          aria-describedby="api-port-field-label"
          id="api-port-field"
        }}

        <!-- validation messages -->
        {{# if afFieldIsInvalid name="apiUmbrella.servers.0.port" }}
          <p class="text-danger">
            {{{ afFieldMessage name="apiUmbrella.servers.0.port" }}}
          </p>
        {{/ if }}

        <!-- help text -->
        <p class="help-block">
          {{_ "proxyBackendForm_apiPort_helpText" }}
        </p>
      </div>
    </div>

    <hr style="color: rgba(59, 59, 88, 0.15);margin-right: -20px;margin-left: -20px;margin-bottom: 1em;margin-top: 0.5em;">
  </div>
</template>
