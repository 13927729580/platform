<!-- Copyright 2017 Apinf Oy
This file is covered by the EUPL license.
You may obtain a copy of the licence at
https://joinup.ec.europa.eu/community/eupl/og_page/european-union-public-licence-eupl-v11 -->

<template name="navbar">
  <nav class="navbar navbar-default main-navigation navbar-fixed-top">
    <div class="container-fluid" style="padding-left: 45px; padding-right: 45px;">
      <div class="navbar-header">
        {{# if projectLogoExists }}
        <a class="navbar-brand text-hide"
          href="{{ pathFor 'home' }}" id="frontpage-button"
          style="background-image:url({{ uploadedProjectLogoLink }})">
          APInf
        </a>
        {{ else }}
        <div class="project-name">
          <a href="{{ pathFor 'home' }}" class="project-name-link" id="frontpage-button">
            {{ branding.siteTitle }}
          </a>
        </div>
        {{/ if }}
      </div>
      <ul class="nav navbar-nav" id="main-navbar">
        <!-- Dashboard -->
        {{# if currentUser }}
          <li class="{{ isActiveRoute 'overview' }} main-links">
            <a href="{{ pathFor 'overview' }}" id="overview-button">
              Overview
            </a>
          </li>
        {{/ if }}
        {{# if currentUser }}
          {{# if proxyIsDefined }}
            {{# if userCanViewDashboard }}
              <li class="{{ isActiveRoute 'dashboardPage' }} main-links">
                <a href="{{ pathFor 'dashboardPage' }}" id="dashboard-button">
                  <!-- {{_ "navbar_dashboard" }} -->
                  Analytics
                </a>
              </li>
            {{/ if }}
          {{/ if }}
        {{/ if }}

        <!-- MQTT Dashboard -->
        {{# if userCanViewMqttDashboard }}
          <li class="{{ isActiveRoute 'mqtt' }} main-links">
            <a href="{{ pathFor 'mqtt' }}" id="mqtt-button">
              {{_ "navbar_mqttDashboard" }}
            </a>
          </li>
        {{/ if }}

        <!-- API catalog -->
        <li class="{{ isActiveRoute 'apiCatalog' }} main-links">
          <a href="{{ pathFor 'apiCatalog' }}" id="apis-button">
            {{_ "navbar_apis" }}
          </a>
        </li>

        <!-- Organizations -->
        <li class="{{ isActiveRoute 'organizationCatalog' }} main-links">
          <a href="{{ pathFor 'organizationCatalog' }}" id="organizations-button">
            {{_ "navbar_organizations" }}
          </a>
        </li>

        <!-- Tenants -->
        <!-- TODO tenant: Show only in case user has logged in via Keyrock -->
        {{# if canManageTenants }}
          <li class="{{ isActiveRoute 'tenantCatalog' }} main-links">
            <a href="{{ pathFor 'tenantCatalog' }}" id="tenants-button">
              Tenants
              <i class="mdi mdi-alpha" style="position: absolute;top: 1px;right: 2px;color: #ffc80f;"></i>
            </a>
          </li>
        {{/ if }}

        {{# if currentUser }}
          {{# if userCanAddApi }}
            <li class="{{ isActiveRoute 'addApi' }} main-links">
              <a href="{{ pathFor 'addApi' }}" id="addapi-button">
                {{_ "navbar_addAPIBackend" }}
              </a>
            </li>
          {{/ if }}

          <!-- Users management -->
          {{# if isInRole 'admin' }}
            <li class="{{ isActiveRoute 'accountsAdmin' }} main-links">
              <a href="{{ pathFor 'accountsAdmin' }}" id="users-button">
                {{_ "navbar_users" }}
              </a>
            </li>
          {{/ if }}
        {{/ if }}

        <!-- Pricing block -->
        {{# if homeCustomBlock }}
          <li class="{{ isActiveRoute 'pricing' }} main-links">
            <a href="{{ pathFor 'pricing' }}" id="pricing-button">
              <i class="fa fa-credit-card" aria-hidden="true"></i>
              {{_ "navbar_pricing" }}
            </a>
          </li>
        {{/ if }}

        <!-- Configuration of site -->
        {{# if isInRole 'admin' }}
          <li class="mobile-links-only hide-link">
            <a href="{{ pathFor 'branding' }}" id="branding-button">
              {{_ "userMenu_branding" }}
            </a>
          </li>
          <li class="mobile-links-only hide-link">
            <a href="{{ pathFor 'settings' }}" id="settings-button">
              {{_ "userMenu_settings" }}
            </a>
          </li>
          <li class="mobile-links-only hide-link">
            <a href="{{ pathFor 'proxies' }}" id="proxies-button">
              {{_ "userMenu_proxies" }}
            </a>
          </li>
          <li class="mobile-links-only hide-link">
            <a href="{{ pathFor 'login-platforms' }}" id="login-platforms-button">
              {{_ "userMenu_loginPlatforms" }}
            </a>
          </li>
        {{/ if }}

        <!-- User own menu -->
        {{# if currentUser }}
          <li class="mobile-links-only hide-link">
            <a href="{{ pathFor 'profile' }}" id="profile-button">
              {{_ "userMenu_profile" }}
            </a>
          </li>
          <li class="mobile-links-only hide-link">
            <a href="/sign-out" id="signout-button">
              {{_ "userMenu_signout" }}
            </a>
          </li>
        {{/ if }}
        {{# if currentUser }}
          {{> userMenu user=currentUser }}
        {{ else }}
          <li class="main-links pull-right">
            <a class="navbar-login" href="{{ pathFor 'signUp' }}" id="signup-button">
              {{_ "navbar_signUp" }}
            </a>
          </li>
          <li class="main-links pull-right">
            <a class="navbar-login" href="{{ pathFor 'signIn' }}" id="signin-button">
              {{_ "navbar_signIn" }}
            </a>
          </li>
        {{/ if }}
      </ul>
    </div>
  </nav>
</template>
