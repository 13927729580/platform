<template name="apiBacklogList">
    {{> autoformModals}}
    {{#if apiBacklogItems}}
        {{#each apiBacklogItems}}
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <b>
                            <div class="{{ itemPriorityClass priority }}"></div>
                            {{title}}
                        </b>
                    </div>
                    <div class="panel-body">
                        <p>{{details}}</p>
                        <div class="backlog-item-footer">
                            <i>
                                {{#if currentUserIsOwner}}
                                    By <b>You</b>
                                {{/if}}
                                {{ relativeTimeStamp createdAt }}
                            </i>
                            {{#if currentUserIsApiManager }}
                                {{#afModal
                                    class="btn btn-danger btn-xs pull-right"
                                    collection="ApiBacklogItems"
                                    operation="remove"
                                    doc=_id}}
                                    {{_ "apiBacklog_removeBacklogItem-button"}}
                                {{/afModal}}
                                {{#afModal
                                    class="btn btn-primary btn-xs pull-right do-margin-right"
                                    collection="ApiBacklogItems"
                                    operation="update"
                                    doc=_id
                                    fields="title,details,priority"}}
                                    {{_ "apiBacklog_editBacklogItem-button"}}
                                {{/afModal}}
                            {{/if}}
                        </div>
                    </div>
                </div>
        {{/each}}
    {{else}}
        <i>{{_ "apiBacklog_noApiBacklogItemsFound"}}</i>
    {{/if}}
</template>
